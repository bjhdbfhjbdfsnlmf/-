# -*- coding: utf-8 -*-

from datetime import datetime
from db_adapter import add_question_to_db, add_choice_to_db, create_tables_in_db
from logger_config import logger

# Список вопросов и вариантов ответов
questions = [
    {
        "question": "Во всех ли городах России есть вечный огонь?",
        "choices": ["Да", "Нет", "Не знаю"]
    },
    {
        "question": "Вам нравится ваша школа?",
        "choices": ["Да, очень", "Нет", "Нормально", "Затрудняюсь ответить"]
    },
    {
        "question": "Какой ваш любимый школьный предмет?",
        "choices": ["Математика", "Русский язык", "Физкультура", "История", "Другой"]
    },
    {
        "question": "Как вы добираетесь до школы?",
        "choices": ["Пешком", "На автобусе", "На машине", "На велосипеде"]
    },
    {
        "question": "Сколько времени вы тратите на домашнее задание?",
        "choices": ["Меньше часа", "1-2 часа", "2-3 часа", "Более 3 часов"]
    },
    {
        "question": "Участвуете ли вы в школьных мероприятиях?",
        "choices": ["Да, часто", "Иногда", "Редко", "Никогда"]
    },
    {
        "question": "Занимаетесь ли вы спортом?",
        "choices": ["Да, регулярно", "Иногда", "Только на физкультуре", "Нет"]
    },
    {
        "question": "Какой у вас любимый вид спорта?",
        "choices": ["Футбол", "Баскетбол", "Волейбол", "Плавание", "Другой"]
    },
    {
        "question": "Сколько времени вы проводите в интернете?",
        "choices": ["Менее 1 часа", "1-3 часа", "3-5 часов", "Более 5 часов"]
    },
    {
        "question": "Какой ваш любимый жанр книг?",
        "choices": ["Фантастика", "Детективы", "Романы", "Научная литература", "Не читаю"]
    },
    {
        "question": "Как часто вы читаете книги?",
        "choices": ["Каждый день", "Несколько раз в неделю", "Редко", "Не читаю"]
    },
    {
        "question": "Какую музыку вы предпочитаете?",
        "choices": ["Поп", "Рок", "Рэп", "Классическая", "Разную"]
    },
    {
        "question": "Играете ли вы в компьютерные игры?",
        "choices": ["Да, часто", "Иногда", "Редко", "Нет"]
    },
    {
        "question": "Какой ваш любимый цвет?",
        "choices": ["Синий", "Красный", "Зеленый", "Желтый", "Другой"]
    },
    {
        "question": "Есть ли у вас домашние животные?",
        "choices": ["Да, кошка", "Да, собака", "Да, другое животное", "Нет"]
    },
    {
        "question": "Какое время года вы любите больше всего?",
        "choices": ["Зима", "Весна", "Лето", "Осень"]
    },
    {
        "question": "Как вы предпочитаете проводить выходные?",
        "choices": ["Гулять с друзьями", "Сидеть дома", "Заниматься спортом", "По-разному"]
    },
    {
        "question": "Какую еду вы предпочитаете?",
        "choices": ["Фастфуд", "Домашняя еда", "Вегетарианская", "Разная"]
    },
    {
        "question": "Как часто вы занимаетесь уборкой?",
        "choices": ["Каждый день", "Раз в неделю", "Когда попросят", "Редко"]
    },
    {
        "question": "Какой ваш любимый праздник?",
        "choices": ["Новый год", "День рождения", "8 марта", "Другой"]
    }
]

def initialize_database():
    """Создает базу данных и заполняет её начальными вопросами"""
    try:
        # Создаем таблицы
        create_tables_in_db()
        logger.info("Таблицы созданы...")

        # Добавляем вопросы и варианты ответов
        for q in questions:
            # Добавляем вопрос
            question_id = add_question_to_db(q["question"], datetime.now())
            logger.debug(f"Добавлен вопрос: {q['question']}")
            
            # Добавляем варианты ответов
            for choice in q["choices"]:
                add_choice_to_db(choice, question_id)
                logger.debug(f"Добавлен вариант ответа: {choice}")
        
        logger.info("База данных инициализирована!")
    except Exception as e:
        logger.error(f"Ошибка при инициализации базы данных: {str(e)}")
        raise

if __name__ == "__main__":
    initialize_database()
